"use strict";(self.webpackChunkfedidocs=self.webpackChunkfedidocs||[]).push([[2255],{3905:(e,t,r)=>{r.d(t,{Zo:()=>p,kt:()=>m});var a=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},o=Object.keys(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var c=a.createContext({}),s=function(e){var t=a.useContext(c),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},p=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},u="mdxType",f={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var r=e.components,n=e.mdxType,o=e.originalType,c=e.parentName,p=i(e,["components","mdxType","originalType","parentName"]),u=s(r),d=n,m=u["".concat(c,".").concat(d)]||u[d]||f[d]||o;return r?a.createElement(m,l(l({ref:t},p),{},{components:r})):a.createElement(m,l({ref:t},p))}));function m(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=r.length,l=new Array(o);l[0]=d;var i={};for(var c in t)hasOwnProperty.call(t,c)&&(i[c]=t[c]);i.originalType=e,i[u]="string"==typeof e?e:n,l[1]=i;for(var s=2;s<o;s++)l[s]=r[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,r)}d.displayName="MDXCreateElement"},7826:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>f,frontMatter:()=>o,metadata:()=>i,toc:()=>s});var a=r(7462),n=(r(7294),r(3905));const o={id:"follow",title:"Follow",sidebar_label:"Follow",sidebar_position:2,tags:["follow"]},l=void 0,i={unversionedId:"projects/funkwhale/activities/follow",id:"projects/funkwhale/activities/follow",title:"Follow",description:"A Follow enables actors to access and retrieve content from other actors as soon as it updates.",source:"@site/docs/projects/funkwhale/activities/follow.md",sourceDirName:"projects/funkwhale/activities",slug:"/projects/funkwhale/activities/follow",permalink:"/projects/funkwhale/activities/follow",draft:!1,tags:[{label:"follow",permalink:"/tags/follow"}],version:"current",sidebarPosition:2,frontMatter:{id:"follow",title:"Follow",sidebar_label:"Follow",sidebar_position:2,tags:["follow"]},sidebar:"projectsSidebar",previous:{title:"Create",permalink:"/projects/funkwhale/activities/create"},next:{title:"Accept",permalink:"/projects/funkwhale/activities/accept"}},c={},s=[{value:"Request",id:"request",level:2},{value:"Internal logic",id:"internal-logic",level:2},{value:"Example",id:"example",level:4}],p={toc:s},u="wrapper";function f(e){let{components:t,...r}=e;return(0,n.kt)(u,(0,a.Z)({},p,r,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("p",null,"A ",(0,n.kt)("inlineCode",{parentName:"p"},"Follow")," enables actors to access and retrieve content from other actors as soon as it updates."),(0,n.kt)("h2",{id:"request"},"Request"),(0,n.kt)("table",null,(0,n.kt)("thead",{parentName:"table"},(0,n.kt)("tr",{parentName:"thead"},(0,n.kt)("th",{parentName:"tr",align:null},"Reference"),(0,n.kt)("th",{parentName:"tr",align:null}))),(0,n.kt)("tbody",{parentName:"table"},(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Activity"),(0,n.kt)("td",{parentName:"tr",align:null},(0,n.kt)("a",{parentName:"td",href:"https://www.w3.org/TR/activitypub/#follow-activity-inbox"},"Follow"))),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"Object"),(0,n.kt)("td",{parentName:"tr",align:null},"A Funkwhale Library or ActivityPub actor")),(0,n.kt)("tr",{parentName:"tbody"},(0,n.kt)("td",{parentName:"tr",align:null},"ID"),(0,n.kt)("td",{parentName:"tr",align:null},"A unique Follow request IRI")))),(0,n.kt)("h2",{id:"internal-logic"},"Internal logic"),(0,n.kt)("p",null,"When Funkwhale receives a follow on a ",(0,n.kt)("a",{parentName:"p",href:"../objects/library"},"library object"),", it performs one of the following actions depending on the library's visibility:"),(0,n.kt)("ul",null,(0,n.kt)("li",{parentName:"ul"},"Automatically accept: If the library is public, Funkwhale automatically accepts the follow activity. Funkwhale sends a notification to the owner of the library and an ",(0,n.kt)("a",{parentName:"li",href:"accept"},(0,n.kt)("inlineCode",{parentName:"a"},"Accept"))," activity to the actor who sent the follow"),(0,n.kt)("li",{parentName:"ul"},"Accept request: If the library isn't public, Funkwhale sends a notification to the library owner. If the owner approves the request, Funkwhale sends an ",(0,n.kt)("a",{parentName:"li",href:"accept"},(0,n.kt)("inlineCode",{parentName:"a"},"Accept"))," activity to the actor who sent the follow")),(0,n.kt)("p",null,"Funkwhale uses the library follow status to grant access to the actor who sent the follow request. If the library isn't public and the owner doesn't send an approval, the requesting actor can't access the library's content."),(0,n.kt)("h4",{id:"example"},"Example"),(0,n.kt)("p",null,"In this example, ",(0,n.kt)("strong",{parentName:"p"},"Alice")," sends a follow activity for a ",(0,n.kt)("a",{parentName:"p",href:"../objects/library"},"library object")," owned by ",(0,n.kt)("strong",{parentName:"p"},"Bob"),"."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "@context": [\n    "https://www.w3.org/ns/activitystreams",\n    "https://w3id.org/security/v1",\n    {}\n  ],\n  "type": "Follow",\n  "id": "https://music.rocks/federation/actors/Alice#follows/99fc40d7-9bc8-4c4a-add1-f637339e1ded",\n  "actor": "https://music.rocks/federation/actors/Alice",\n  "to": ["https://awesome.music/federation/actors/Bob"],\n  "object": "https://awesome.music/federation/music/libraries/dc702491-f6ce-441b-9da0-cecbed08bcc6"\n}\n')))}f.isMDXComponent=!0}}]);